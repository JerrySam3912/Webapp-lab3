<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Task 1.2 - Shopping Cart</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: Arial, sans-serif; background: #f5f5f5; }

    .header {
      background: #333; color: white; padding: 20px;
      display: flex; justify-content: space-between; align-items: center;
    }
    .cart-icon { position: relative; cursor: pointer; user-select: none; }
    .cart-count {
      position: absolute; top: -10px; right: -10px;
      background: red; color: white; border-radius: 50%;
      width: 24px; height: 24px; display: flex; align-items: center;
      justify-content: center; font-size: 12px;
    }

    .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
    .products-grid {
      display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 20px; margin-bottom: 40px;
    }
    .product-card {
      background: white; padding: 20px; border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      display: flex; flex-direction: column; gap: 10px;
    }
    .product-image {
      width: 100%; height: 180px; background: #ddd; border-radius: 4px;
      display: flex; align-items: center; justify-content: center; font-size: 64px;
    }
    .product-name { font-size: 18px; font-weight: bold; }
    .product-price { color: #28a745; font-size: 20px; }
    .add-to-cart-btn {
      width: 100%; padding: 10px; background: #007bff; color: white;
      border: none; border-radius: 4px; cursor: pointer; font-size: 16px;
    }
    .add-to-cart-btn:hover { background: #0056b3; }

    .cart-section { background: white; padding: 20px; border-radius: 8px; }
    .cart-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
    .cart-item {
      display: grid; grid-template-columns: 1fr auto auto auto; gap: 12px;
      align-items: center; padding: 15px 0; border-bottom: 1px solid #eee;
    }
    .cart-item-name { font-weight: bold; }
    .quantity-controls { display: flex; gap: 8px; align-items: center; }
    .quantity-controls button {
      width: 30px; height: 30px; border: 1px solid #ddd; background: white;
      cursor: pointer; border-radius: 4px;
    }
    .remove-btn {
      border: 1px solid #dc3545; color: #dc3545; background: #fff; border-radius: 4px;
      padding: 6px 10px; cursor: pointer;
    }
    .remove-btn:hover { background: #ffe5e7; }
    .cart-total {
      text-align: right; font-size: 22px; font-weight: bold; padding-top: 16px;
      border-top: 2px solid #333;
    }
    .empty { color: #777; font-style: italic; padding: 10px 0; }
  </style>
</head>
<body>
  <div class="header">
    <h1>My Shop</h1>
    <div class="cart-icon" onclick="toggleCart()">
      ðŸ›’ Cart
      <span class="cart-count" id="cartCount">0</span>
    </div>
  </div>

  <div class="container">
    <h2>Products</h2>
    <div class="products-grid" id="productsGrid"></div>

    <div class="cart-section" id="cartSection" style="display: none;">
      <div class="cart-header">
        <h2>Shopping Cart</h2>
        <button class="remove-btn" onclick="clearCart()">Clear Cart</button>
      </div>
      <div id="cartItems"></div>
      <div class="cart-total">Total: $<span id="cartTotal">0.00</span></div>
    </div>
  </div>

  <script>
    
    const products = [
      { id: 1, name: 'Laptop',      price: 999.99, image: 'ðŸ’»' },
      { id: 2, name: 'Smartphone',  price: 699.99, image: 'ðŸ“±' },
      { id: 3, name: 'Headphones',  price: 199.99, image: 'ðŸŽ§' },
      { id: 4, name: 'Smartwatch',  price: 299.99, image: 'âŒš' }
    ];

    let cart = []; 
    const $ = (sel) => document.querySelector(sel);
    const money = (n) => Number(n).toFixed(2);

    function getCartCount() {
      return cart.reduce((sum, item) => sum + item.qty, 0);
    }

  
    function addToCart(productId) {
      const product = products.find(p => p.id === productId);
      if (!product) return;

      const existing = cart.find(i => i.productId === productId);
      if (existing) {
        existing.qty += 1;
      } else {
        cart.push({ productId, name: product.name, price: product.price, qty: 1 });
      }

      updateCartUI();
    }

    function removeFromCart(productId) {
      cart = cart.filter(i => i.productId !== productId);
      updateCartUI();
    }

    function updateQuantity(productId, change) {
      const item = cart.find(i => i.productId === productId);
      if (!item) return;

      item.qty += change;
      if (item.qty <= 0) {
        // remove if drops to 0
        cart = cart.filter(i => i.productId !== productId);
      }
      updateCartUI();
    }

    function calculateTotal() {
      return cart.reduce((sum, i) => sum + i.price * i.qty, 0);
    }

    function clearCart() {
      cart = [];
      updateCartUI();
    }

   
    function renderProducts() {
      const grid = $('#productsGrid');
      grid.innerHTML = products.map(p => `
        <div class="product-card">
          <div class="product-image">${p.image}</div>
          <div class="product-name">${p.name}</div>
          <div class="product-price">$${money(p.price)}</div>
          <button class="add-to-cart-btn" onclick="addToCart(${p.id})">
            Add to Cart
          </button>
        </div>
      `).join('');
    }

    function renderCart() {
      const container = $('#cartItems');

      if (cart.length === 0) {
        container.innerHTML = `<p class="empty">Your cart is empty. Add some products above!</p>`;
        $('#cartTotal').textContent = '0.00';
        return;
      }

      container.innerHTML = cart.map(i => `
        <div class="cart-item">
          <div class="cart-item-name">${i.name}</div>

          <div class="quantity-controls">
            <button aria-label="Decrease" onclick="updateQuantity(${i.productId}, -1)">âˆ’</button>
            <span>${i.qty}</span>
            <button aria-label="Increase" onclick="updateQuantity(${i.productId}, 1)">+</button>
          </div>

          <div>$${money(i.price * i.qty)}</div>

          <div>
            <button class="remove-btn" onclick="removeFromCart(${i.productId})">Remove</button>
          </div>
        </div>
      `).join('');

      $('#cartTotal').textContent = money(calculateTotal());
    }

    function updateCartUI() {
      // badge count
      $('#cartCount').textContent = getCartCount();
      // list + totals
      renderCart();
    }

    function toggleCart() {
      const sec = $('#cartSection');
      sec.style.display = (sec.style.display === 'none') ? 'block' : 'none';
    }

    
    renderProducts();
    renderCart(); 
  </script>
</body>
</html>